\documentclass[openany]{book}

\usepackage{afterpage}
\usepackage{fontspec}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{lscape}
\usepackage{siunitx}
\usepackage{titling}

\newcommand*{\subtitle}[1]{\gdef\thesubtitle{#1}}

\title{CRAPS Kernel}
\subtitle{Final Report}
\author{
       Maxime Arthaud
  \and Korantin Auguste
  \and Martin Carton
  \and Étienne Lebrun
  \and Pierre-Louis Michel
}

\begin{document}
  \include{titlepage}

  \chapter*{Acknowledgments}
    We would like to thank Jean-Christophe Buisson for giving us all the tools
    related to CRAPS that he has developed. We won a lot of time thanks to this.

    \paragraph{}
    We also would like to thank Bernard Desmyter and Benoit Lemarchand for
    having tested our compiler and showed us some bugs we did not see ourselves
    and Mickaël Carl for helping us with VHDL's best practices.

    \paragraph{}
    Finally, we would like to thank Xavier Mechin, our industrial supervisor,
    for guiding us throughout this two-month project.

  \tableofcontents

  \chapter{Introduction}
    \section{Context}
      This project, suggested by Daniel Hagimont, is based on the CRAPS
      processor developed by Jean-Christophe Buisson and used in the first-year
      computer architecture courses at ENSEEIHT. The goal is to develop an
      operating system that would run on top of that processor.

      Daniel Hagimont aims to do a operating system course for ENSEEIHT
      students. The course would be based on the computer architecture course as
      Daniel Hagimont wants to add a more continuity in ENSEEIHT courses. At the
      beginning of the project it was only possible to do a little of assembly
      directly on the processor to see it work, but nothing more.
      After our project, it should be possible for students to really see
      the layer that goes on top of the CPU in modern computers: the operating
      system. Students should be able to really make the link between the
      processor and operating system they just built and the computer and
      underlying operating systems they use everyday.

    \section{Work required}
      The project is composed of three main tasks:
      \begin{itemize}
        \item improve the simple processor developed by students to add missing
          features;
        \item create a compiler for a \textit{C-like} language to the CRAPS
          assembly language;
        \item the operating kernel system itself.
      \end{itemize}

      All tools and source code produced will need to be documented for both
      teachers and students.

    \section{Available resources}
      Jean-Christophe Buisson initially lent us 2 boards. As this was not enough
      for the four of us to work efficiently, he lent us 4 more boards.
      He also gave us the sources of the tools he developed for his students so
      that we could adapt them for our needs.

      Our client got us a room in ENSEEIHT to work.

      \paragraph{}
      We also set up a \textit{git}\footnote{\textit{git} is distributed Version
      Control System (VCS).} repository to put all the sources and document we
      have produced during this project. This allowed us to efficiently work
      simultaneously on the same files and keep a history of all changes.
      We also set up a mailing list and a Jabber room\footnote{\textit{Jabber}
      is an instant messaging protocol.} to communicate with each other.

      We did all the work on our own personal computers.

  \chapter{Project management}
    The team is composed of four members:
    \begin{itemize}
      \item Korantin Auguste as \textit{developer}
      \item Maxime Arthaud as \textit{tester}
      \item Martin Carton as \textit{project leader}
      \item Étienne Lebrun as \textit{quality manager}
    \end{itemize}

    We were initially 5 but one of us had to leave the team for medical reasons
    at the beginning of the project.

  \chapter{Specification phase}
    We planned a meeting with the client the first day of the project. He
    explained us what he wanted us to do and that the project was very flexible.
    His goal is to be able to make lab sessions for first-year students of
    ENSEEIHT. Thus, as long as he can show students how an operating system
    works the project will be a success.

    \section{Redaction of the technical specifications}
      Once we had determined the client's needs, we had to specify exactly what
      we had to do. This phase was difficult as the client was imprecise about
      what we had to do.

    \section{Technical choices}
      We choose to work as much as possible on GNU/Linux as this is our
      daily-use operating system and the operating system installed on most
      ENSEEIHT computers.
      However, the tools we needed were designed to work exclusively on
      Microsoft Windows. To get around this problem, we decided to use the
      Windows-specific tools in a virtual machine or adapt tools to GNU/Linux
      when possible.

      \subsection{Compiler}
        As we had to write a compiler but this is a very time-consuming task, we
        decided to reuse the compiler we had to write for a previous ENSEEIHT
        project. This compiler did not target the CRAPS machine, but we made it
        modular enough to able to easily add a CRAPS back-end.

        We considered for a moment to write a CRAPS back-end for \emph{LLVM}, a
        compiler infrastructure\cite{llvm}. This would have had the advantage to
        be able to used \emph{clang}, a real, complete and optimized
        \emph{C} compiler. But the work it would have required seemed to be too
        important as we did not know the \emph{LLVM} infrastructure and the
        infrastructure contains a lot of features we would not have used but
        would have had to support.

  \chapter{Implementation phase}

  \chapter{Validation phase}
    \section{Tests}
    \section{Limitations}

  \chapter{Conclusion}

  \addcontentsline{toc}{chapter}{Bibliography}
  \begin{thebibliography}{9}
    \bibitem{buisson}
      Jean-Christophe Buisson,
      \emph{Introduction à l'architecture des ordinateurs},
      Chapitre VII.\ CRAPS~: guide du programmeur.

      \mbox{\url{http://diabeto.enseeiht.fr/download/archi/cours/book2_4.4.pdf}}

    \bibitem{nexys2}
      \emph{Digilent Nexys2 Board, Reference Manual},
      Revision: July 11, 2011.

      \mbox{\url{http://www.digilentinc.com/data/products/nexys2/nexys2_rm.pdf}}

    \bibitem{llvm}
      \emph{Writing an LLVM Backend}

      \mbox{\url{http://llvm.org/docs/WritingAnLLVMBackend.html}}
  \end{thebibliography}

  \addcontentsline{toc}{chapter}{Annexes}
  \chapter*{Annexes}
    \newgeometry{top=1cm,bottom=1cm}
    \thispagestyle{empty}
    \begin{figure}
      \centering
      \includegraphics[
        angle=90,
        width=\linewidth,
        height=\textheight
      ]{Gantt.pdf}
      \label{fig:gantt}
    \end{figure}
    \clearpage
    \restoregeometry
\end{document}
