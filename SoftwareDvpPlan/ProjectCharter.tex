\documentclass{article}

\usepackage{afterpage}
\usepackage{fontspec}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{lscape}
\usepackage{pgfgantt}
\usepackage{siunitx}
\usepackage{titling}

\title{CRAPS Kernel}
\author{
       Maxime Arthaud
  \and Korantin Auguste
  \and Martin Carton
  \and Étienne Lebrun
  \and Pierre-Louis Michel
}

\begin{document}
  \include{titlepage}
  \tableofcontents
  \newpage

  \section{Introduction}
    This project, suggested by Daniel Hagimont, is based on the CRAPS processor
    developed by Jean-Christophe Buisson and used in the first-year CPU
    architecture courses at ENSEEIHT. The goal is to develop an operating
    system that would run on top of that processor.

    The reasons for that project are that before, it was only possible to do a
    little of assembly directly on the processor to see it work, but nothing
    more.  After our project, it should be possible for students to really see
    the layer that goes on top of the CPU in modern computers: the operating
    system. So that the students can really make the link between the processor
    they just built and the computer and underlying operating systems they use
    everyday.

    \paragraph{}
    The system will be as modular as possible, so that students can reuse parts
    of it and implement their own modules.

  \section{Project Overview}
    The objective of the project is to create an operating system, with a
    scheduler running a few tasks. It will also provide functions to display
    text to the user, do input/output to a permanent storage\dots

    For now, having the OS loading programs dynamically is out-of-scope : the
    goal is to have a very simple functional OS.  We will also have to improve
    the CPU to make it support our OS. Specifically we know we will have to
    support the RAM chips that are on the FPGA: currently, we have \SI{2}{kB}
    of RAM that are built in, but that's clearly not enough.

    Another important
    and time-consuming element will be to reuse the compiler we made last year
    during a project, and adapt it to generate the CRAPS assembly. We will
    surely need to make other modifications to the compiler.

  \section{Method, Tools and Test Facilities}
    A room and two FPGAs have been made available for us to work.

    Tests are quite a though point, as our only facility of real test is to put
    our code on the board and try it. That's why we want to proceed iteratively
    and start with very basic things.

    At the end, we want to be able to run a few processes that will communicate
    with the user, and store data in permanent memory.

  \section{Software Team Organisation and Responsibilities}
    \begin{itemize}
      \item Korantin Auguste as \textit{developer}
      \item Maxime Arthaud as \textit{developer}
      \item Martin Carton as \textit{project leader}
      \item Étienne Lebrun as \textit{tester}
      \item Pierre-Louis Michel as \textit{tester}
    \end{itemize}

  \section{Project Monitoring and Controls}
    A Gantt diagram for the project is available on page \pageref{fig:gantt}.

    Controls: meetings?

    \afterpage{\input{gantt}}

  \section{Meetings and reporting}
    Two kinds of meetings are planned:
    \begin{itemize}
        \item a meeting once a week with the client;
        \item a meeting once a week with the industrial supervisor.
    \end{itemize}
    Minutes of these meetings are available is the repository.

    Additionally we regularly meet to talk about the advancement of the project.

  \section{Management of actions}
    A file with the actions (who did what and when has been created).

  \section{Management of risks}
    \begin{itemize}
      \item A FPGA can be damaged, making any test impossible. This is likely to
          happen but we have two FPGAs and the possibility to have more in case
          of problem.
      \item We may not be able to integrate the RAM, leading to huge memory
          limitations that may make the project impossible
    \end{itemize}

  \section{Management of change requests}

  \section{Quality and Configuration management}
    We have decided to use a version control system to record every document and
    all the source code produced. A Git repository has been created on
    Github\footnote{Github repository:
    \url{https://github.com/mcarton/CRAPS-Kernel}}.

  \section{Documentation}
    As the system will be modular and expected to be used by students, a
    documentation of every module will be provided.

    \begin{itemize}
      \item User Manual
      \item modified CRAPS
    \end{itemize}

  \newpage
  \begin{appendix}
      \section{Specifications}

      \begin{enumerate}
        \item Improvement of the processor
          \begin{enumerate}
            \item The processor should support at least 32 kB of RAM. The RAM should be accessed in a fast way, but the loss of a few (less than 10) cycles is acceptable.
            \item The processor should support the I/O needed to read/write from/to permanent storage (SD card or persistent internal memory)
            \item The processor should support a serial port that can be opened for communicating with another device (like a computer). It will use the RS232 port on the FPGA.
          \end{enumerate}
        \item Compiler
          \begin{enumerate}
            \item The compiler should support a langage similar as C89, allowing us to easily develop the operating system.
            \item The compiler should generate valid CRAPS assembly.
          \end{enumerate}
        \item Development of the OS
          \begin{enumerate}
            \item The OS should have a scheduler. There are no real-time constraint (but it should switch regularly, at least 10 times per second). It should support at least 10 hard-coded tasks.
            \item The OS should have a task making a led blink and showing that it is working and that the scheduler runs.
            \item The OS should have another task communicating with the user, in the form of a VERY simple shell. At the end, this mini-shell will allow writing and reading to permanent storage.
            \item The OS should have a few functions available to any program : at least a "malloc" to allocate dynamic memory, and an API to read/write to the serial port and to permanent storage.
          \end{enumerate}
      \end{enumerate}

      \section{Tasks}
      \begin{itemize}
        \item Improvement of the processor
          \begin{itemize}
            \item the FPGA shall have access to the RAM to have more than
              \SI{2}{kB} of memory
            \item the FPGA shall be able to use the \textit{RS-232} serial port
              to communicate with the user
            \item the FPGA shall have a permanent storage, such as flash memory
          \end{itemize}
        \item Compiler
          \begin{itemize}
            \item the compiler shall have a CRAPS backend
            \item the language shall be more similar to C
              \begin{itemize}
                \item operators shall have the same priority
                \item users should be able to use arrays
              \end{itemize}
          \end{itemize}
          \item Development of the OS
            \begin{itemize}
              \item test task 1: make a led blink
              \item test task 2: communicate with the user
                \begin{itemize}
                  \item development of a mini-shell ?
                  \item management of the I/O from the software
                \end{itemize}
              \item scheduler and process management
              \item system calls and API of the OS:
                \begin{itemize}
                  \item very simple file system
                  \item user I/O (using the serial port or other means)
                  \item system task to manage the I/O?
                  \item functions like \verb+malloc+, etc.
                \end{itemize}
            \end{itemize}
        \item Report
          \begin{itemize}
            \item write the developer documentation
          \end{itemize}
      \end{itemize}
  \end{appendix}
\end{document}
