\documentclass{article}

\usepackage{afterpage}
\usepackage{fontspec}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{lscape}
\usepackage{pgfgantt}
\usepackage{siunitx}
\usepackage{titling}

\newcommand*{\subtitle}[1]{\gdef\thesubtitle{#1}}

\title{CRAPS Kernel}
\subtitle{Specifications}
\author{
       Maxime Arthaud
  \and Korantin Auguste
  \and Martin Carton
  \and Ã‰tienne Lebrun
  \and Pierre-Louis Michel
}

\begin{document}
  \include{titlepage}
  \newpage
    \section{V1 specifications}
    The first version consists of the most basic OS functionalities. 
      \subsection{Improvement of the processor}
        \begin{enumerate}
          \item The processor should have access to at least \SI{32}{kB} of RAM.
            The RAM should be accessed in a fast way, but the loss of a few
            (less than 10) cycles is acceptable.
          \item The processor should handle several interruptions sources, with
            a priority system. An interruption handler can only be interrupted
            by an interruption of a strictly higher priority.
          \item Several registers should be added.
   
        \end{enumerate}

      \subsection{Compiler}
        To write the OS in reasonable time, we need to be able to compile a
        higher level language to craps assembly. For that purpose, we chose to
        reuse the compiler we wrote last year.
        \begin{enumerate}     
            \item The compiler input should be a subset of \textit{C89}
                (see appendix for details)
          \item The compiler should generate valid CRAPS assembly.
        \end{enumerate}

      \subsection{Development of the OS}
        \begin{enumerate}
          \item The OS should have a scheduler. There are no real-time
          constraint (but it should switch regularly, at least 10 times per
          second). It should support at least 10 hard-coded tasks.
          %  -> test plan
          %\item The OS should have a task making a led blink and showing that it
          %  is working and that the scheduler runs.
          \item The OS should provide a basic library available to any program :
            \begin{itemize}
              \item a \verb+malloc+ to allocate dynamic memory
              \item functions to write the leds and sseg display, and read the
                 switches
              \item division and modulus operations
             \end{itemize}
        \end{enumerate}

    \section{V2 specifications}
    The second version adds distant communications.
      \subsection{Improvement of the processor}
        \begin{enumerate}
          \item The processor should be connected to a serial port, to allow 
            communication with other devices (like a computer). It can use the
            \textit{RS-232} port on the FPGA.
        \end{enumerate}

      \subsection{Compiler}
        \begin{enumerate}     
          \item Enlarge the subset of \textit{C89}
          \item The compiler should generate valid CRAPS assembly.
          \item The assembly generated should be more optimized. 
        \end{enumerate}

      \subsection{Development of the OS}
        \begin{enumerate}
          \item The OS should have a task communicating with the user through
            the RS-232, in the form of a very simple shell.
          \item extension to the OS library: an API to read/write to the serial 
              port.
        \end{enumerate}

      \section{further development}
        If we have enough time, it would be interesting to access the flash
        memory present on the board. This implies the development of a shdl/vhdl
        module and the OS code to use it.With this improvements, we could:
        \begin{itemize}
          \item write and read memory from the shell.
          \item implement a basic file system.
        \end{itemize}

\newpage
  \begin{appendix}
    \section{Description of the C subset}
      \begin{itemize}
        \item while loop
        \item pointers
        \item conditions
        \item functions
        \item most binary operators (division and modulo are not supported by the
          hardware)
      \end{itemize}
      The following elements are planned for the v2:
      \begin{itemize}
        \item globals
        \item arrays
        \item structs
        \item \& (address) operator
        \item for loop
      \end{itemize}
  \end{appendix}

\end{document}
